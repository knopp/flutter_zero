# This file is generated. Do not edit directly.
name: Engine Artifacts
on:
  pull_request:
env:
  DEPOT_TOOLS_WIN_TOOLCHAIN: 0
  FLUTTER_PREBUILT_DART_SDK: 1
  R2_BUCKET: flutter-zero-engine
  ENGINE_CHECKOUT_PATH: ${{ github.workspace }}/engine
jobs:
  mac_host_debug_framework:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/host_debug_framework
      - name: Tar build files
        run: |
          tar -cvf mac_host_debug_framework.tar engine/src/out/ci/host_debug_framework
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_host_debug_framework-${{ steps.engine_content_hash.outputs.value }}
          path: mac_host_debug_framework.tar
          retention-days: 1
  mac_host_debug:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/host_debug
      - name: Tar build files
        run: |
          tar -cvf mac_host_debug.tar engine/src/out/ci/host_debug
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_host_debug-${{ steps.engine_content_hash.outputs.value }}
          path: mac_host_debug.tar
          retention-days: 1
      - name: Tar engine/src/out/ci/host_debug/zip_archives/darwin-x64/artifacts.zip
        run: |
          cd engine/src/out/ci/host_debug/zip_archives/darwin-x64
          tar -cvf artifact_0.tar artifacts.zip
      - name: Upload darwin-x64/mac_host_debug
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_0
          path: engine/src/out/ci/host_debug/zip_archives/darwin-x64/artifact_0.tar
          retention-days: 1
      - name: Tar engine/src/out/ci/host_debug/zip_archives/dart-sdk-darwin-x64.zip
        run: |
          cd engine/src/out/ci/host_debug/zip_archives
          tar -cvf artifact_1.tar dart-sdk-darwin-x64.zip
      - name: Upload /mac_host_debug
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_1
          path: engine/src/out/ci/host_debug/zip_archives/artifact_1.tar
          retention-days: 1
  mac_host_debug_gen_snapshot:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/host_debug_gen_snapshot
      - name: Tar build files
        run: |
          tar -cvf mac_host_debug_gen_snapshot.tar engine/src/out/ci/host_debug_gen_snapshot
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_host_debug_gen_snapshot-${{ steps.engine_content_hash.outputs.value }}
          path: mac_host_debug_gen_snapshot.tar
          retention-days: 1
  mac_host_profile:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/host_profile
      - name: Tar build files
        run: |
          tar -cvf mac_host_profile.tar engine/src/out/ci/host_profile
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_host_profile-${{ steps.engine_content_hash.outputs.value }}
          path: mac_host_profile.tar
          retention-days: 1
      - name: Tar engine/src/out/ci/host_profile/zip_archives/darwin-x64-profile/artifacts.zip
        run: |
          cd engine/src/out/ci/host_profile/zip_archives/darwin-x64-profile
          tar -cvf artifact_2.tar artifacts.zip
      - name: Upload darwin-x64-profile/mac_host_profile
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_2
          path: engine/src/out/ci/host_profile/zip_archives/darwin-x64-profile/artifact_2.tar
          retention-days: 1
  mac_host_profile_framework:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/host_profile_framework
      - name: Tar build files
        run: |
          tar -cvf mac_host_profile_framework.tar engine/src/out/ci/host_profile_framework
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_host_profile_framework-${{ steps.engine_content_hash.outputs.value }}
          path: mac_host_profile_framework.tar
          retention-days: 1
  mac_host_profile_gen_snapshot:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/host_profile_gen_snapshot
      - name: Tar build files
        run: |
          tar -cvf mac_host_profile_gen_snapshot.tar engine/src/out/ci/host_profile_gen_snapshot
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_host_profile_gen_snapshot-${{ steps.engine_content_hash.outputs.value }}
          path: mac_host_profile_gen_snapshot.tar
          retention-days: 1
  mac_host_release:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/host_release
      - name: Tar build files
        run: |
          tar -cvf mac_host_release.tar engine/src/out/ci/host_release
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_host_release-${{ steps.engine_content_hash.outputs.value }}
          path: mac_host_release.tar
          retention-days: 1
      - name: Tar engine/src/out/ci/host_release/zip_archives/darwin-x64-release/artifacts.zip
        run: |
          cd engine/src/out/ci/host_release/zip_archives/darwin-x64-release
          tar -cvf artifact_3.tar artifacts.zip
      - name: Upload darwin-x64-release/mac_host_release
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_3
          path: engine/src/out/ci/host_release/zip_archives/darwin-x64-release/artifact_3.tar
          retention-days: 1
      - name: Tar engine/src/out/ci/host_release/zip_archives/darwin-x64/font-subset.zip
        run: |
          cd engine/src/out/ci/host_release/zip_archives/darwin-x64
          tar -cvf artifact_4.tar font-subset.zip
      - name: Upload darwin-x64/mac_host_release
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_4
          path: engine/src/out/ci/host_release/zip_archives/darwin-x64/artifact_4.tar
          retention-days: 1
  mac_host_release_framework:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/host_release_framework
      - name: Tar build files
        run: |
          tar -cvf mac_host_release_framework.tar engine/src/out/ci/host_release_framework
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_host_release_framework-${{ steps.engine_content_hash.outputs.value }}
          path: mac_host_release_framework.tar
          retention-days: 1
  mac_host_release_gen_snapshot:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/host_release_gen_snapshot
      - name: Tar build files
        run: |
          tar -cvf mac_host_release_gen_snapshot.tar engine/src/out/ci/host_release_gen_snapshot
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_host_release_gen_snapshot-${{ steps.engine_content_hash.outputs.value }}
          path: mac_host_release_gen_snapshot.tar
          retention-days: 1
  mac_debug_arm64:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/mac_debug_arm64
      - name: Tar build files
        run: |
          tar -cvf mac_debug_arm64.tar engine/src/out/ci/mac_debug_arm64
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_debug_arm64-${{ steps.engine_content_hash.outputs.value }}
          path: mac_debug_arm64.tar
          retention-days: 1
      - name: Tar engine/src/out/ci/mac_debug_arm64/zip_archives/darwin-arm64/artifacts.zip
        run: |
          cd engine/src/out/ci/mac_debug_arm64/zip_archives/darwin-arm64
          tar -cvf artifact_5.tar artifacts.zip
      - name: Upload darwin-arm64/mac_debug_arm64
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_5
          path: engine/src/out/ci/mac_debug_arm64/zip_archives/darwin-arm64/artifact_5.tar
          retention-days: 1
      - name: Tar engine/src/out/ci/mac_debug_arm64/zip_archives/dart-sdk-darwin-arm64.zip
        run: |
          cd engine/src/out/ci/mac_debug_arm64/zip_archives
          tar -cvf artifact_6.tar dart-sdk-darwin-arm64.zip
      - name: Upload /mac_debug_arm64
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_6
          path: engine/src/out/ci/mac_debug_arm64/zip_archives/artifact_6.tar
          retention-days: 1
  mac_debug_framework_arm64:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/mac_debug_framework_arm64
      - name: Tar build files
        run: |
          tar -cvf mac_debug_framework_arm64.tar engine/src/out/ci/mac_debug_framework_arm64
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_debug_framework_arm64-${{ steps.engine_content_hash.outputs.value }}
          path: mac_debug_framework_arm64.tar
          retention-days: 1
  mac_debug_gen_snapshot_arm64:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/mac_debug_gen_snapshot_arm64
      - name: Tar build files
        run: |
          tar -cvf mac_debug_gen_snapshot_arm64.tar engine/src/out/ci/mac_debug_gen_snapshot_arm64
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_debug_gen_snapshot_arm64-${{ steps.engine_content_hash.outputs.value }}
          path: mac_debug_gen_snapshot_arm64.tar
          retention-days: 1
  mac_profile_arm64:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/mac_profile_arm64
      - name: Tar build files
        run: |
          tar -cvf mac_profile_arm64.tar engine/src/out/ci/mac_profile_arm64
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_profile_arm64-${{ steps.engine_content_hash.outputs.value }}
          path: mac_profile_arm64.tar
          retention-days: 1
      - name: Tar engine/src/out/ci/mac_profile_arm64/zip_archives/darwin-arm64-profile/artifacts.zip
        run: |
          cd engine/src/out/ci/mac_profile_arm64/zip_archives/darwin-arm64-profile
          tar -cvf artifact_7.tar artifacts.zip
      - name: Upload darwin-arm64-profile/mac_profile_arm64
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_7
          path: engine/src/out/ci/mac_profile_arm64/zip_archives/darwin-arm64-profile/artifact_7.tar
          retention-days: 1
  mac_profile_framework_arm64:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/mac_profile_framework_arm64
      - name: Tar build files
        run: |
          tar -cvf mac_profile_framework_arm64.tar engine/src/out/ci/mac_profile_framework_arm64
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_profile_framework_arm64-${{ steps.engine_content_hash.outputs.value }}
          path: mac_profile_framework_arm64.tar
          retention-days: 1
  mac_profile_gen_snapshot_arm64:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/mac_profile_gen_snapshot_arm64
      - name: Tar build files
        run: |
          tar -cvf mac_profile_gen_snapshot_arm64.tar engine/src/out/ci/mac_profile_gen_snapshot_arm64
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_profile_gen_snapshot_arm64-${{ steps.engine_content_hash.outputs.value }}
          path: mac_profile_gen_snapshot_arm64.tar
          retention-days: 1
  mac_release_arm64:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/mac_release_arm64
      - name: Tar build files
        run: |
          tar -cvf mac_release_arm64.tar engine/src/out/ci/mac_release_arm64
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_release_arm64-${{ steps.engine_content_hash.outputs.value }}
          path: mac_release_arm64.tar
          retention-days: 1
      - name: Tar engine/src/out/ci/mac_release_arm64/zip_archives/darwin-arm64/font-subset.zip
        run: |
          cd engine/src/out/ci/mac_release_arm64/zip_archives/darwin-arm64
          tar -cvf artifact_8.tar font-subset.zip
      - name: Upload darwin-arm64/mac_release_arm64
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_8
          path: engine/src/out/ci/mac_release_arm64/zip_archives/darwin-arm64/artifact_8.tar
          retention-days: 1
      - name: Tar engine/src/out/ci/mac_release_arm64/zip_archives/darwin-arm64-release/artifacts.zip
        run: |
          cd engine/src/out/ci/mac_release_arm64/zip_archives/darwin-arm64-release
          tar -cvf artifact_9.tar artifacts.zip
      - name: Upload darwin-arm64-release/mac_release_arm64
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_9
          path: engine/src/out/ci/mac_release_arm64/zip_archives/darwin-arm64-release/artifact_9.tar
          retention-days: 1
  mac_release_framework_arm64:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/mac_release_framework_arm64
      - name: Tar build files
        run: |
          tar -cvf mac_release_framework_arm64.tar engine/src/out/ci/mac_release_framework_arm64
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_release_framework_arm64-${{ steps.engine_content_hash.outputs.value }}
          path: mac_release_framework_arm64.tar
          retention-days: 1
  mac_release_gen_snapshot_arm64:
    runs-on: macos-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Build engine
        run: |
          cd engine/src
          ./flutter/bin/et build --config ci/mac_release_gen_snapshot_arm64
      - name: Tar build files
        run: |
          tar -cvf mac_release_gen_snapshot_arm64.tar engine/src/out/ci/mac_release_gen_snapshot_arm64
      - name: Upload build files
        uses: actions/upload-artifact@v4
        with:
          name: artifacts-mac_release_gen_snapshot_arm64-${{ steps.engine_content_hash.outputs.value }}
          path: mac_release_gen_snapshot_arm64.tar
          retention-days: 1
  mac_host_engine_global:
    runs-on: macos-latest
    needs:
      - mac_host_debug_framework
      - mac_host_debug
      - mac_host_debug_gen_snapshot
      - mac_host_profile
      - mac_host_profile_framework
      - mac_host_profile_gen_snapshot
      - mac_host_release
      - mac_host_release_framework
      - mac_host_release_gen_snapshot
      - mac_debug_arm64
      - mac_debug_framework_arm64
      - mac_debug_gen_snapshot_arm64
      - mac_profile_arm64
      - mac_profile_framework_arm64
      - mac_profile_gen_snapshot_arm64
      - mac_release_arm64
      - mac_release_framework_arm64
      - mac_release_gen_snapshot_arm64
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        if: runner.os != 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Free disk space
        if: runner.os == 'Linux' && runner.arch == 'X64'
        run: curl -fsSL https://raw.githubusercontent.com/apache/arrow/e49d8ae15583ceff03237571569099a6ad62be32/ci/scripts/util_free_space.sh | bash
      - name: Set up depot_tools
        if: runner.os == 'Windows'
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          DEPOT_TOOLS_WIN=$(cygpath -w "$HOME/depot_tools")
          echo "$DEPOT_TOOLS_WIN" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Copy gclient file
        run: |
          cp engine/scripts/slim.gclient .gclient
      - name: GClient sync
        run: |
          gclient sync -D --no-history --shallow --with_branch_heads
      - name: Download Artifacts from mac_host_debug_framework
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_host_debug_framework-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_host_debug_framework
        run: |
          tar -xvf mac_host_debug_framework.tar
          rm mac_host_debug_framework.tar
      - name: Download Artifacts from mac_host_debug
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_host_debug-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_host_debug
        run: |
          tar -xvf mac_host_debug.tar
          rm mac_host_debug.tar
      - name: Download Artifacts from mac_host_debug_gen_snapshot
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_host_debug_gen_snapshot-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_host_debug_gen_snapshot
        run: |
          tar -xvf mac_host_debug_gen_snapshot.tar
          rm mac_host_debug_gen_snapshot.tar
      - name: Download Artifacts from mac_host_profile
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_host_profile-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_host_profile
        run: |
          tar -xvf mac_host_profile.tar
          rm mac_host_profile.tar
      - name: Download Artifacts from mac_host_profile_framework
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_host_profile_framework-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_host_profile_framework
        run: |
          tar -xvf mac_host_profile_framework.tar
          rm mac_host_profile_framework.tar
      - name: Download Artifacts from mac_host_profile_gen_snapshot
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_host_profile_gen_snapshot-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_host_profile_gen_snapshot
        run: |
          tar -xvf mac_host_profile_gen_snapshot.tar
          rm mac_host_profile_gen_snapshot.tar
      - name: Download Artifacts from mac_host_release
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_host_release-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_host_release
        run: |
          tar -xvf mac_host_release.tar
          rm mac_host_release.tar
      - name: Download Artifacts from mac_host_release_framework
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_host_release_framework-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_host_release_framework
        run: |
          tar -xvf mac_host_release_framework.tar
          rm mac_host_release_framework.tar
      - name: Download Artifacts from mac_host_release_gen_snapshot
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_host_release_gen_snapshot-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_host_release_gen_snapshot
        run: |
          tar -xvf mac_host_release_gen_snapshot.tar
          rm mac_host_release_gen_snapshot.tar
      - name: Download Artifacts from mac_debug_arm64
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_debug_arm64-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_debug_arm64
        run: |
          tar -xvf mac_debug_arm64.tar
          rm mac_debug_arm64.tar
      - name: Download Artifacts from mac_debug_framework_arm64
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_debug_framework_arm64-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_debug_framework_arm64
        run: |
          tar -xvf mac_debug_framework_arm64.tar
          rm mac_debug_framework_arm64.tar
      - name: Download Artifacts from mac_debug_gen_snapshot_arm64
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_debug_gen_snapshot_arm64-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_debug_gen_snapshot_arm64
        run: |
          tar -xvf mac_debug_gen_snapshot_arm64.tar
          rm mac_debug_gen_snapshot_arm64.tar
      - name: Download Artifacts from mac_profile_arm64
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_profile_arm64-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_profile_arm64
        run: |
          tar -xvf mac_profile_arm64.tar
          rm mac_profile_arm64.tar
      - name: Download Artifacts from mac_profile_framework_arm64
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_profile_framework_arm64-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_profile_framework_arm64
        run: |
          tar -xvf mac_profile_framework_arm64.tar
          rm mac_profile_framework_arm64.tar
      - name: Download Artifacts from mac_profile_gen_snapshot_arm64
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_profile_gen_snapshot_arm64-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_profile_gen_snapshot_arm64
        run: |
          tar -xvf mac_profile_gen_snapshot_arm64.tar
          rm mac_profile_gen_snapshot_arm64.tar
      - name: Download Artifacts from mac_release_arm64
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_release_arm64-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_release_arm64
        run: |
          tar -xvf mac_release_arm64.tar
          rm mac_release_arm64.tar
      - name: Download Artifacts from mac_release_framework_arm64
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_release_framework_arm64-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_release_framework_arm64
        run: |
          tar -xvf mac_release_framework_arm64.tar
          rm mac_release_framework_arm64.tar
      - name: Download Artifacts from mac_release_gen_snapshot_arm64
        uses: actions/download-artifact@v4
        with:
          name: artifacts-mac_release_gen_snapshot_arm64-${{ steps.engine_content_hash.outputs.value }}
      - name: Extract Artifacts from mac_release_gen_snapshot_arm64
        run: |
          tar -xvf mac_release_gen_snapshot_arm64.tar
          rm mac_release_gen_snapshot_arm64.tar
      - name: Run generator Debug-FlutterEmbedder.framework
        run: |
          cd engine/src
          flutter/sky/tools/create_embedder_framework.py \
            --dst \
            out/debug/framework \
            --arm64-out-dir \
            out/ci/mac_debug_framework_arm64 \
            --x64-out-dir \
            out/ci/host_debug_framework \
            --zip
      - name: Run generator Release-FlutterMacOS.framework
        run: |
          cd engine/src
          flutter/sky/tools/create_macos_framework.py \
            --dst \
            out/release/framework \
            --arm64-out-dir \
            out/ci/mac_release_framework_arm64 \
            --x64-out-dir \
            out/ci/host_release_framework \
            --dsym \
            --strip \
            --zip
      - name: Run generator Debug-FlutterMacOS.framework
        run: |
          cd engine/src
          flutter/sky/tools/create_macos_framework.py \
            --dst \
            out/debug/framework \
            --arm64-out-dir \
            out/ci/mac_debug_framework_arm64 \
            --x64-out-dir \
            out/ci/host_debug_framework \
            --zip
      - name: Run generator Profile-FlutterMacOS.framework
        run: |
          cd engine/src
          flutter/sky/tools/create_macos_framework.py \
            --dst \
            out/profile/framework \
            --arm64-out-dir \
            out/ci/mac_profile_framework_arm64 \
            --x64-out-dir \
            out/ci/host_profile_framework \
            --zip
      - name: Run generator Verify-export-symbols
        run: |
          cd engine/src
          ../../bin/dart flutter/testing/symbols/verify_exported.dart \
            src/out/ci \
            src/flutter/buildtools
      - name: Run generator Debug-gen_snapshots
        run: |
          cd engine/src
          flutter/sky/tools/create_macos_gen_snapshots.py \
            --dst \
            out/debug/snapshot \
            --arm64-path \
            out/ci/mac_debug_gen_snapshot_arm64/universal/gen_snapshot_arm64 \
            --x64-path \
            out/ci/host_debug_gen_snapshot/universal/gen_snapshot_x64 \
            --zip
      - name: Run generator Profile-gen_snapshots
        run: |
          cd engine/src
          flutter/sky/tools/create_macos_gen_snapshots.py \
            --dst \
            out/profile/snapshot \
            --arm64-path \
            out/ci/mac_profile_gen_snapshot_arm64/universal/gen_snapshot_arm64 \
            --x64-path \
            out/ci/host_profile_gen_snapshot/universal/gen_snapshot_x64 \
            --zip
      - name: Run generator Release-gen_snapshots
        run: |
          cd engine/src
          flutter/sky/tools/create_macos_gen_snapshots.py \
            --dst \
            out/release/snapshot \
            --arm64-path \
            out/ci/mac_release_gen_snapshot_arm64/universal/gen_snapshot_arm64 \
            --x64-path \
            out/ci/host_release_gen_snapshot/universal/gen_snapshot_x64 \
            --zip
      - name: Tar engine/src/out/debug/framework/FlutterEmbedder.framework.zip
        run: |
          cd engine/src/out/debug/framework
          tar -cvf artifact_10.tar FlutterEmbedder.framework.zip
      - name: Upload darwin-x64/mac_host_engine_global
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_10
          path: engine/src/out/debug/framework/artifact_10.tar
          retention-days: 1
      - name: Tar engine/src/out/debug/framework/FlutterMacOS.framework.zip
        run: |
          cd engine/src/out/debug/framework
          tar -cvf artifact_11.tar FlutterMacOS.framework.zip
      - name: Upload darwin-x64/mac_host_engine_global
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_11
          path: engine/src/out/debug/framework/artifact_11.tar
          retention-days: 1
      - name: Tar engine/src/out/profile/framework/FlutterMacOS.framework.zip
        run: |
          cd engine/src/out/profile/framework
          tar -cvf artifact_12.tar FlutterMacOS.framework.zip
      - name: Upload darwin-x64-profile/mac_host_engine_global
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_12
          path: engine/src/out/profile/framework/artifact_12.tar
          retention-days: 1
      - name: Tar engine/src/out/release/framework/FlutterMacOS.framework.zip
        run: |
          cd engine/src/out/release/framework
          tar -cvf artifact_13.tar FlutterMacOS.framework.zip
      - name: Upload darwin-x64-release/mac_host_engine_global
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_13
          path: engine/src/out/release/framework/artifact_13.tar
          retention-days: 1
      - name: Tar engine/src/out/debug/snapshot/gen_snapshot.zip
        run: |
          cd engine/src/out/debug/snapshot
          tar -cvf artifact_14.tar gen_snapshot.zip
      - name: Upload darwin-x64/mac_host_engine_global
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_14
          path: engine/src/out/debug/snapshot/artifact_14.tar
          retention-days: 1
      - name: Tar engine/src/out/profile/snapshot/gen_snapshot.zip
        run: |
          cd engine/src/out/profile/snapshot
          tar -cvf artifact_15.tar gen_snapshot.zip
      - name: Upload darwin-x64-profile/mac_host_engine_global
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_15
          path: engine/src/out/profile/snapshot/artifact_15.tar
          retention-days: 1
      - name: Tar engine/src/out/release/snapshot/gen_snapshot.zip
        run: |
          cd engine/src/out/release/snapshot
          tar -cvf artifact_16.tar gen_snapshot.zip
      - name: Upload darwin-x64-release/mac_host_engine_global
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_16
          path: engine/src/out/release/snapshot/artifact_16.tar
          retention-days: 1
      - name: Tar engine/src/out/debug/framework/framework.zip
        run: |
          cd engine/src/out/debug/framework
          tar -cvf artifact_17.tar framework.zip
      - name: Upload darwin-x64/mac_host_engine_global
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_17
          path: engine/src/out/debug/framework/artifact_17.tar
          retention-days: 1
      - name: Tar engine/src/out/profile/framework/framework.zip
        run: |
          cd engine/src/out/profile/framework
          tar -cvf artifact_18.tar framework.zip
      - name: Upload darwin-x64-profile/mac_host_engine_global
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_18
          path: engine/src/out/profile/framework/artifact_18.tar
          retention-days: 1
      - name: Tar engine/src/out/release/framework/framework.zip
        run: |
          cd engine/src/out/release/framework
          tar -cvf artifact_19.tar framework.zip
      - name: Upload darwin-x64-release/mac_host_engine_global
        uses: actions/upload-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_19
          path: engine/src/out/release/framework/artifact_19.tar
          retention-days: 1
  publish_artifacts:
    defaults:
      run:
        shell: bash
    needs:
      - mac_host_debug
      - mac_host_profile
      - mac_host_release
      - mac_debug_arm64
      - mac_profile_arm64
      - mac_release_arm64
      - mac_host_engine_global
    runs-on: ubuntu-latest
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
        with:
          path: ''
      - name: Set up depot_tools
        run: |
          git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git $HOME/depot_tools
          # Append depot_tools to the PATH for subsequent steps
          echo "$HOME/depot_tools" >> $GITHUB_PATH
      - name: Generate engine content hash
        id: engine_content_hash
        run: |
          engine_content_hash=$(bin/internal/content_aware_hash.sh)
          echo "::notice:: Engine content hash: ${engine_content_hash}"
          echo "value=${engine_content_hash}" >> $GITHUB_OUTPUT
      - name: Download darwin-x64/artifacts.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_0
          path: artifact-0/
      - name: Extract darwin-x64/artifacts.zip
        run: |
          tar -xvf artifact-0/artifact_0.tar -C artifact-0/
          rm artifact-0/artifact_0.tar
      - name: Download /dart-sdk-darwin-x64.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_1
          path: artifact-1/
      - name: Extract /dart-sdk-darwin-x64.zip
        run: |
          tar -xvf artifact-1/artifact_1.tar -C artifact-1/
          rm artifact-1/artifact_1.tar
      - name: Download darwin-x64-profile/artifacts.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_2
          path: artifact-2/
      - name: Extract darwin-x64-profile/artifacts.zip
        run: |
          tar -xvf artifact-2/artifact_2.tar -C artifact-2/
          rm artifact-2/artifact_2.tar
      - name: Download darwin-x64-release/artifacts.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_3
          path: artifact-3/
      - name: Extract darwin-x64-release/artifacts.zip
        run: |
          tar -xvf artifact-3/artifact_3.tar -C artifact-3/
          rm artifact-3/artifact_3.tar
      - name: Download darwin-x64/font-subset.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_4
          path: artifact-4/
      - name: Extract darwin-x64/font-subset.zip
        run: |
          tar -xvf artifact-4/artifact_4.tar -C artifact-4/
          rm artifact-4/artifact_4.tar
      - name: Download darwin-arm64/artifacts.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_5
          path: artifact-5/
      - name: Extract darwin-arm64/artifacts.zip
        run: |
          tar -xvf artifact-5/artifact_5.tar -C artifact-5/
          rm artifact-5/artifact_5.tar
      - name: Download /dart-sdk-darwin-arm64.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_6
          path: artifact-6/
      - name: Extract /dart-sdk-darwin-arm64.zip
        run: |
          tar -xvf artifact-6/artifact_6.tar -C artifact-6/
          rm artifact-6/artifact_6.tar
      - name: Download darwin-arm64-profile/artifacts.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_7
          path: artifact-7/
      - name: Extract darwin-arm64-profile/artifacts.zip
        run: |
          tar -xvf artifact-7/artifact_7.tar -C artifact-7/
          rm artifact-7/artifact_7.tar
      - name: Download darwin-arm64/font-subset.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_8
          path: artifact-8/
      - name: Extract darwin-arm64/font-subset.zip
        run: |
          tar -xvf artifact-8/artifact_8.tar -C artifact-8/
          rm artifact-8/artifact_8.tar
      - name: Download darwin-arm64-release/artifacts.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_9
          path: artifact-9/
      - name: Extract darwin-arm64-release/artifacts.zip
        run: |
          tar -xvf artifact-9/artifact_9.tar -C artifact-9/
          rm artifact-9/artifact_9.tar
      - name: Download darwin-x64/FlutterEmbedder.framework.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_10
          path: artifact-10/
      - name: Extract darwin-x64/FlutterEmbedder.framework.zip
        run: |
          tar -xvf artifact-10/artifact_10.tar -C artifact-10/
          rm artifact-10/artifact_10.tar
      - name: Download darwin-x64/FlutterMacOS.framework.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_11
          path: artifact-11/
      - name: Extract darwin-x64/FlutterMacOS.framework.zip
        run: |
          tar -xvf artifact-11/artifact_11.tar -C artifact-11/
          rm artifact-11/artifact_11.tar
      - name: Download darwin-x64-profile/FlutterMacOS.framework.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_12
          path: artifact-12/
      - name: Extract darwin-x64-profile/FlutterMacOS.framework.zip
        run: |
          tar -xvf artifact-12/artifact_12.tar -C artifact-12/
          rm artifact-12/artifact_12.tar
      - name: Download darwin-x64-release/FlutterMacOS.framework.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_13
          path: artifact-13/
      - name: Extract darwin-x64-release/FlutterMacOS.framework.zip
        run: |
          tar -xvf artifact-13/artifact_13.tar -C artifact-13/
          rm artifact-13/artifact_13.tar
      - name: Download darwin-x64/gen_snapshot.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_14
          path: artifact-14/
      - name: Extract darwin-x64/gen_snapshot.zip
        run: |
          tar -xvf artifact-14/artifact_14.tar -C artifact-14/
          rm artifact-14/artifact_14.tar
      - name: Download darwin-x64-profile/gen_snapshot.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_15
          path: artifact-15/
      - name: Extract darwin-x64-profile/gen_snapshot.zip
        run: |
          tar -xvf artifact-15/artifact_15.tar -C artifact-15/
          rm artifact-15/artifact_15.tar
      - name: Download darwin-x64-release/gen_snapshot.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_16
          path: artifact-16/
      - name: Extract darwin-x64-release/gen_snapshot.zip
        run: |
          tar -xvf artifact-16/artifact_16.tar -C artifact-16/
          rm artifact-16/artifact_16.tar
      - name: Download darwin-x64/framework.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_17
          path: artifact-17/
      - name: Extract darwin-x64/framework.zip
        run: |
          tar -xvf artifact-17/artifact_17.tar -C artifact-17/
          rm artifact-17/artifact_17.tar
      - name: Download darwin-x64-profile/framework.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_18
          path: artifact-18/
      - name: Extract darwin-x64-profile/framework.zip
        run: |
          tar -xvf artifact-18/artifact_18.tar -C artifact-18/
          rm artifact-18/artifact_18.tar
      - name: Download darwin-x64-release/framework.zip
        uses: actions/download-artifact@v4
        with:
          name: artifact_${{ steps.engine_content_hash.outputs.value }}_19
          path: artifact-19/
      - name: Extract darwin-x64-release/framework.zip
        run: |
          tar -xvf artifact-19/artifact_19.tar -C artifact-19/
          rm artifact-19/artifact_19.tar
      - name: Publish darwin-x64/artifacts.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-0/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-x64
      - name: Publish /dart-sdk-darwin-x64.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-1/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/
      - name: Publish darwin-x64-profile/artifacts.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-2/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-x64-profile
      - name: Publish darwin-x64-release/artifacts.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-3/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-x64-release
      - name: Publish darwin-x64/font-subset.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-4/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-x64
      - name: Publish darwin-arm64/artifacts.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-5/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-arm64
      - name: Publish /dart-sdk-darwin-arm64.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-6/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/
      - name: Publish darwin-arm64-profile/artifacts.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-7/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-arm64-profile
      - name: Publish darwin-arm64/font-subset.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-8/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-arm64
      - name: Publish darwin-arm64-release/artifacts.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-9/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-arm64-release
      - name: Publish darwin-x64/FlutterEmbedder.framework.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-10/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-x64
      - name: Publish darwin-x64/FlutterMacOS.framework.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-11/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-x64
      - name: Publish darwin-x64-profile/FlutterMacOS.framework.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-12/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-x64-profile
      - name: Publish darwin-x64-release/FlutterMacOS.framework.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-13/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-x64-release
      - name: Publish darwin-x64/gen_snapshot.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-14/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-x64
      - name: Publish darwin-x64-profile/gen_snapshot.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-15/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-x64-profile
      - name: Publish darwin-x64-release/gen_snapshot.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-16/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-x64-release
      - name: Publish darwin-x64/framework.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-17/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-x64
      - name: Publish darwin-x64-profile/framework.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-18/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-x64-profile
      - name: Publish darwin-x64-release/framework.zip
        uses: ryand56/r2-upload-action@b801a390acbdeb034c5e684ff5e1361c06639e7c
        with:
          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
          r2-bucket: ${{ env.R2_BUCKET }}
          source-dir: artifact-19/
          destination-dir: flutter_infra_release/flutter/${{ steps.engine_content_hash.outputs.value }}/darwin-x64-release
